# FND-003: AI-Readiness Evaluation Gates in CI

**Initiative ID:** FND-003  
**Status:** In Progress  
**Phase:** Phase A (Foundation Stabilization)  
**Last Updated:** 2026-02-20

---

## 1. Problem

Prompt and retrieval changes can regress intent routing, SQL quality, and evidence grounding. Without CI gates, regressions reach production and are expensive to diagnose.

## 2. Scope

In scope:

- Define evaluation suites for intent, retrieval, SQL, and clarification behavior.
- Add threshold-based CI gates with fail conditions.
- Produce versioned evaluation artifacts for each CI run.

Out of scope:

- Full online/offline experimentation platform.
- Automated model retraining.

## 3. Proposed Design

- Standardize eval inputs and deterministic fixtures.
- Run suites in CI with configurable thresholds per lane.
- Block merges when key metrics drop below guardrails.

## 4. API and Contract Changes

- Document eval suite contract and threshold config schema.
- Expose CI artifact paths in developer docs.

## 5. Data Model and Storage Changes

- Persist eval outputs in report artifacts and optional historical store.
- Track baseline hashes for prompt and routing regressions.

## 6. Safety and Policy

- Gate merges on high-severity eval failures.
- Require explicit override process for emergency bypass.

## 7. Acceptance Criteria

Functional:

- [ ] CI runs intent/retrieval/sql/clarification eval suites per PR.
- [ ] Merge is blocked when configured thresholds are not met.

Quality:

- [ ] Suites are deterministic and reproducible locally.
- [ ] Regression reports identify failing scenarios and relevant traces.

## 8. Test Plan

- unit: eval scoring and threshold evaluator tests.
- integration: CI workflow tests with pass/fail fixture sets.
- manual: run eval commands locally and compare with CI outputs.

## 9. Rollout and Rollback

Rollout:

- Start in monitor mode, then move to blocking for critical suites.

Rollback:

- Temporarily downgrade blocking to warning while preserving artifacts.

## 10. Open Questions

- Which suites are release-blocking vs advisory in early phases?
- Should threshold profiles differ by target database engine?
