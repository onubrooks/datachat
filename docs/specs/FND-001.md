# FND-001: Metadata Contracts and Linting Gates

**Initiative ID:** FND-001  
**Status:** In Progress  
**Phase:** Phase A (Foundation Stabilization)  
**Last Updated:** 2026-02-20

---

## 1. Problem

DataPoint quality is inconsistent across managed and user-authored metadata. Missing grain, freshness, ownership, and constraints cause retrieval drift and unstable SQL behavior.

## 2. Scope

In scope:

- Define required metadata contract fields by DataPoint type.
- Implement deterministic linting at ingest/sync time.
- Block invalid metadata from entering retrieval indexes.

Out of scope:

- Semantic auto-repair of bad metadata.
- Full UI authoring experience redesign.

## 3. Proposed Design

- Add central contract validators in metadata ingestion pipeline.
- Fail fast with actionable error messages that identify exact missing/invalid fields.
- Add CI check to run metadata lint against repository DataPoints.

## 4. API and Contract Changes

- Enforce required fields in DataPoint contract docs and validators.
- Return structured validation error payloads from ingest endpoints/commands.

## 5. Data Model and Storage Changes

- No new primary storage tables required.
- Persist lint report artifacts in CI output for diagnostics.

## 6. Safety and Policy

- Strict validation must be deterministic and versioned.
- Introduce explicit contract version to avoid silent rule shifts.

## 7. Acceptance Criteria

Functional:

- [ ] Metadata ingest/sync rejects DataPoints that violate required fields.
- [ ] Error output includes DataPoint ID, field path, and remediation hint.

Quality:

- [ ] CI metadata lint runs on every PR and blocks on contract violations.
- [ ] Contract behavior is covered by unit tests for all supported DataPoint types.

## 8. Test Plan

- unit: validator tests for missing fields, invalid values, and backward compatibility.
- integration: ingest/sync end-to-end tests with valid and invalid metadata packs.
- manual: run lint against sample repos and verify actionable diagnostics.

## 9. Rollout and Rollback

Rollout:

- Introduce warnings mode for one release window, then switch to blocking mode.

Rollback:

- Revert to warnings-only gate while preserving lint logs for triage.

## 10. Open Questions

- Should contract version be set globally or per DataPoint type?
- Which optional fields should become required in the next version?
