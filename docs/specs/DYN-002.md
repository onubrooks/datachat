# DYN-002: Unified Workspace State (Data, Docs, and Organizational Context)

**Initiative ID:** DYN-002  
**Status:** Planned  
**Phase:** Phase C (Dynamic Data Agent Foundation)  
**Last Updated:** 2026-02-20

---

## 1. Problem

DataChat needs a unified context model across database state, documentation/files, and organizational knowledge to support reliable dynamic planning.

## 2. Scope

In scope:

- Define workspace state schema spanning data assets, docs, and org metadata.
- Add context assembly service with freshness metadata.
- Expose summarized workspace context to planner/verifier.

Out of scope:

- Full enterprise knowledge graph ingestion from every external system.
- Long-term archival storage strategy redesign.

## 3. Proposed Design

- Build workspace context builder with source adapters.
- Normalize entities (dataset, metric, owner, doc) into shared identifiers.
- Provide bounded context snapshots per request/session.

## 4. API and Contract Changes

- Add internal workspace-context contract consumed by planner/retriever.
- Document source confidence and freshness fields.

## 5. Data Model and Storage Changes

- Introduce workspace entity index and relation mapping tables.
- Store snapshot metadata with source versions and timestamps.

## 6. Safety and Policy

- Apply source access policy per context adapter.
- Prevent cross-source leakage of restricted organizational data.

## 7. Acceptance Criteria

Functional:

- [ ] Planner receives unified context containing data, docs, and org hints.
- [ ] Context records include freshness/confidence and source provenance.

Quality:

- [ ] Context assembly latency remains within configured budget.
- [ ] Context snapshots are deterministic for fixed fixture inputs.

## 8. Test Plan

- unit: source normalization and entity resolution tests.
- integration: context assembly across database + docs fixture sets.
- manual: verify planner behavior improvements on mixed data+docs prompts.

## 9. Rollout and Rollback

Rollout:

- Start with read-only context assembly and shadow planner consumption.

Rollback:

- Disable unified context path and use existing retrieval context only.

## 10. Open Questions

- Which organizational data sources should be first-class in MVP?
- How should conflicting source definitions be ranked?
